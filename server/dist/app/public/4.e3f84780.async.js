(window["webpackJsonp_sugo-portal-app"]=window["webpackJsonp_sugo-portal-app"]||[]).push([[4],{"/WSn":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HOME_PAGES=t.Menus=t.default=void 0;var n=[{path:"/",component:"../layouts/index",routes:[{path:"/login",component:"./login"},{path:"/portal-home",component:"./portal-home/index"},{path:"/my-workbench",component:"./my-workbench/index"},{path:"/app-store",component:"./app-store/index"},{path:"/search",component:"../components/portal-search-page/index"},{path:"/application-management",component:"./application-management/index"},{path:"/search",component:"../components/portal-search-page"}]}];t.default=n;var l=[{id:"portal-home",name:"\u9996\u9875",children:[{path:"/portal-home",name:"\u9996\u9875"}]},{id:"my-workbench",name:"\u6211\u7684\u5de5\u4f5c\u53f0",children:[{path:"/my-workbench",name:"\u6211\u7684\u5de5\u4f5c\u53f0"}]},{name:"\u5e94\u7528\u4e2d\u5fc3",id:"app-store",children:[{name:"\u5e94\u7528\u4e2d\u5fc3",path:"/app-store"}]},{name:"\u7cfb\u7edf\u7ba1\u7406",id:"system-manager",children:[{path:"/application-management",name:"\u5e94\u7528\u7ba1\u7406"}]}];t.Menus=l;var r=["/my-workbench"];t.HOME_PAGES=r},aArQ:function(e,t,a){"use strict";var n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a("2Taf")),r=n(a("vZ4D")),o=n(a("l4Ni")),u=n(a("ujKo")),i=n(a("MhPg")),s=n(a("q1tI")),p=a("/WSn"),d=n(a("b5Px")),c=n(a("LvDl")),f=n(a("3a4m")),h=a("qKvR"),m=function(e){function t(){var e,a;(0,l.default)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=(0,o.default)(this,(e=(0,u.default)(t)).call.apply(e,[this].concat(r))),a.state={selectMenu:"my-workbench",selectSubMenu:"",hideIcon:!1},a.jump=function(e){f.default.push(e)},a.onMenuChange=function(e){a.setState({selectMenu:e})},a.getBread=function(e){var t=[],n=[],l=e.findIndex(function(e){return e.path===window.location.pathname});if(l>=0&&(t.push(e[l]),n.push(l)),e[l]&&!e[l].routes)return{bread:c.default.flatten(t),index:c.default.flatten(n)};var r={};return c.default.forEach(e,function(e,l){!c.default.get(r,"bread.length",0)&&c.default.get(e,"routes.length",0)&&(r=a.getBread(e.routes),r.bread.length&&(t.push(c.default.pick(e,["name","path"])),n.push(l)))}),c.default.isEmpty(r)||(t.push(r.bread),n.push(r.index)),{bread:c.default.flatten(t),index:c.default.flatten(n)}},a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){if("/"===window.location.pathname)return window.location.pathname="/console/portal/my-workbench"}},{key:"render",value:function(){var e=this.state.selectMenu,t=p.Menus.find(function(t){return t.id===e}),a=(window.self.frameElement||window.self!==window.top)&&window.sugo.hideMenu,n=!1,l=c.default.get(t,"[0].children[0].path"),r=this.props.location,o={menus:p.Menus,firstMenuPath:l,location:r,selectMenu:e,onMenuChange:this.onMenuChange};return(0,h.jsx)("div",{id:"sugo-portal",style:window.__POWERED_BY_QIANKUN__?{width:"100%",height:"100%"}:{minWidth:"1300px"}},a||n||window.__POWERED_BY_QIANKUN__?null:(0,h.jsx)(d.default,o),(0,h.jsx)("div",{id:"main-container-portal",style:{height:"100%"}},this.props.children))}}]),t}(s.default.Component);t.default=m},"aD/V":function(e,t,a){},b5Px:function(e,t,a){"use strict";var n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a("d6i3")),r=n(a("1l/V"));a("qVdP");var o=n(a("jsC+")),u=n(a("qIgq"));a("Pwec");var i=n(a("CtXQ")),s=n(a("p0pE")),p=n(a("2Taf")),d=n(a("vZ4D")),c=n(a("l4Ni")),f=n(a("ujKo")),h=n(a("MhPg"));a("5NDa");var m=n(a("5rEg"));a("lUTK");var v=n(a("BvKs")),g=n(a("q1tI")),x=n(a("TSYQ")),y=n(a("3a4m")),w=n(a("wY1l")),b=n(a("LvDl"));a("aD/V");a("Hg0r");var k=n(a("ExLZ")),j=a("qKvR"),M=v.default.ItemGroup,_=v.default.Item,N=m.default.Search,P=function(e){function t(){var e,a;(0,p.default)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return a=(0,c.default)(this,(e=(0,f.default)(t)).call.apply(e,[this].concat(l))),a.state={menuAvalWidth:100,inputValue:""},a.checkActive=function(e){var t=a.props.location.pathname;return"/portal"===t&&(t=a.props.firstMenuPath),b.default.find(e,function(e){return e.path&&t.includes(e.path)})},a.renderMenus=function(e){var t=a.state.menuAvalWidth,n=a.props.onMenuChange,l=e.length,r=(t-97*l)/(l-1);r<0?r=0:r>20&&(r=20);var p=t-97*l-r*(l-1);return p<0?p=0:p>97&&(p=97),(0,j.jsx)("span",{className:"top-menus"},e.map(function(e,t){var d=e.name,c=e.children,f=(0,x.default)("top-menu iblock",{active:a.checkActive(c)}),h=b.default.find(c,function(e){return e.path&&!e.hide});if(!h)return null;var m=h.enableURLTemplate?b.default.template(h.path)(a.props):h.path,g={marginRight:t===l-1?0:r,marginLeft:t?1:p},y=c.filter(function(e){return e&&!e.hide}),k=(0,j.jsx)(v.default,{selectedKeys:[a.props.selectMenu]},y.filter(function(e,t,a){return!("label"===e.type&&("label"===b.default.get(a,[t+1,"type"])||t===a.length-1))}).map(function(e,t){var l=e.path,r=e.title,o=e.icon,u=void 0===o?"bars":o,p=e.type,d=e.query,c=void 0===d?"":d,f=e.className,h=void 0===f?"":f,m=e.style,v=void 0===m?{}:m;if("label"===p)return(0,j.jsx)(M,{className:"ignore-mouse header-menu-grouplabel",key:t+r,title:(0,j.jsx)("div",{className:"header-menu-txt"},r)});if("_blank"===e.target){var g=e.enableURLTemplate?b.default.template(e.path)(a.props):e.path;return g?(0,j.jsx)(_,{key:l+c,className:h,style:v},(0,j.jsx)("a",{href:g+c,key:r,style:(0,s.default)({},v,{paddingLeft:0,paddingRight:0}),target:"_blank",className:"block header-menu-item"},(0,j.jsx)(i.default,{type:u,className:"mg1r"})," ",r)):null}return(0,j.jsx)(_,{key:l+c,className:h,style:v},(0,j.jsx)(w.default,{to:l+c,onClick:n,className:"block header-menu-item"},(0,j.jsx)(i.default,{type:u,className:"mg1r"})," ",r))}));if(1===y.length){var N=(0,u.default)(y,1),P=N[0];if("_blank"===P.target){var C=P.enableURLTemplate?b.default.template(P.path)(a.props):P.path;return C?(0,j.jsx)("a",{href:C,key:d,className:f,style:g,target:"_blank"},P.title||d):null}return(0,j.jsx)(w.default,{to:m,key:d,className:f,style:g,onClick:n},P.title||d)}return(0,j.jsx)(o.default,{overlay:k,key:d,placement:"bottomLeft"},"_blank"===h.target?(0,j.jsx)("a",{href:m,className:f,style:g,target:"_blank"},d):(0,j.jsx)(w.default,{to:m,className:f,style:g,onClick:n},d," ",(0,j.jsx)(i.default,{type:"down"})))}))},a.renderUserMenu=function(){var e=a.props.user.user,t=null===e||void 0===e?void 0:e.firstName,n=[],l=(0,j.jsx)(v.default,null,n.map(function(e){var t=e.to,a=e.title;return(0,j.jsx)(_,{key:t},(0,j.jsx)(w.default,{to:t},a))}),(0,j.jsx)(_,{key:"logout"},(0,j.jsx)("a",{onClick:function(){return a.logout()}},(0,j.jsx)(i.default,{type:"logout"})," \u6ce8\u9500\u767b\u5f55")));return(0,j.jsx)(o.default,{overlay:l,placement:"bottomLeft"},(0,j.jsx)(w.default,{className:"user-link itblock pd2x"},(0,j.jsx)("span",{className:"iblock mw120 elli alignright",title:t},(0,j.jsx)("b",null,t)," ",(0,j.jsx)(i.default,{type:"down"}))))},a}return(0,h.default)(t,e),(0,d.default)(t,[{key:"logout",value:function(){var e=(0,r.default)(l.default.mark(function e(){return l.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k.default.get("/common/logout");case 2:this.props.dispatch({type:"user/logout"}),window.location.pathname="/login";case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"render",value:function(){var e=this,t=this.props,a=t.menus,n=void 0===a?[]:a,o=(t.firstMenuPath,this.state.inputValue);return(0,j.jsx)("div",{id:"main-header"},(0,j.jsx)("div",{style:{width:"200px",height:"48px",lineHeight:"48px",fontSize:"18px",fontWeight:"bold",fontFamily:"MicrosoftYaHei-Bold",paddingLeft:"20px"}},"\u8fd0\u8425\u8d44\u6e90\u51b3\u7b56\u5206\u6790\u7cfb\u7edf"),(0,j.jsx)("div",{style:{flexGrow:1}},this.renderMenus(n)),(0,j.jsx)("div",{style:{width:"350px"}},"/search"===this.props.location.pathname?(0,j.jsx)("div",{style:{display:"inline-block",width:200}}):(0,j.jsx)(N,{allowClear:!0,placeholder:"\u641c\u7d22",onSearch:function(){var t=(0,r.default)(l.default.mark(function t(a){return l.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.setState({inputValue:""}),y.default.push("/search?value=".concat(a));case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),onChange:function(t){e.setState({inputValue:t.target.value})},value:o,style:{width:200}})))}}]),t}(g.default.Component);t.default=P}}]);