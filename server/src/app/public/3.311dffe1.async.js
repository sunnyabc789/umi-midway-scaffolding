(window["webpackJsonp_sugo-portal-app"]=window["webpackJsonp_sugo-portal-app"]||[]).push([[3],{"+KaR":function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDIwIDIwIj4KICA8ZGVmcz4KICAgIDxzdHlsZT4KICAgICAgLmNscy0xIHsKICAgICAgICBmaWxsLXJ1bGU6IGV2ZW5vZGQ7CiAgICAgICAgZmlsbDogIzY5NjlkNzsKICAgICAgfQogICAgPC9zdHlsZT4KICA8L2RlZnM+CiAgPHBhdGggaWQ9Imljb25fc29ydCIgY2xhc3M9ImNscy0xIiBkPSJNMzUxLDE3Mmg0djJoLTR2LTJabTAtNWg3djJoLTd2LTJabTAtNWg5djJoLTl2LTJabS00LDBoLTJ2MTBoLTNsNCw0LDQtNGgtM1YxNjJaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzQxIC0xNTkpIi8+Cjwvc3ZnPgo="},"/rU9":function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDIwIDIwIj4KICA8ZGVmcz4KICAgIDxzdHlsZT4KICAgICAgLmNscy0xIHsKICAgICAgICBmaWxsLXJ1bGU6IGV2ZW5vZGQ7CiAgICAgICAgb3BhY2l0eTogMC40NTsKICAgICAgfQogICAgPC9zdHlsZT4KICA8L2RlZnM+CiAgPHBhdGggaWQ9Imljb25fc29ydCIgY2xhc3M9ImNscy0xIiBkPSJNMzUxLDE3Mmg0djJoLTR2LTJabTAtNWg3djJoLTd2LTJabTAtNWg5djJoLTl2LTJabS00LDBoLTJ2MTBoLTNsNCw0LDQtNGgtM1YxNjJaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzQxIC0xNTkpIi8+Cjwvc3ZnPgo="},"0Xj/":function(e,t,a){"use strict";var n=a("tAuX"),i=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=E;var r=i(a("eHn4"));a("sRBo");var l=i(a("kaz8"));a("Pwec");var u=i(a("CtXQ")),d=i(a("d6i3")),o=i(a("1l/V"));a("+L6B");var s=i(a("2/Rp"));a("miYZ");var c=i(a("tsqr")),p=i(a("qIgq"));a("5NDa");var f=i(a("5rEg")),g=n(a("q1tI")),h=i(a("SdiA")),v=i(a("VNuU")),x=i(a("qZsN")),M=i(a("pJmw")),m=a("hdZo"),A=a("Hg0r"),L=i(a("0kZ6")),y=a("g96v"),j=a("r9/Z"),w=i(a("LvDl")),T=i(a("bj5R")),C=i(a("/rU9")),S=i(a("kQEM")),I=i(a("+KaR")),D=a("B+SW"),N=a("qKvR"),b=f.default.Search;function E(e){var t,a=(0,g.useState)(!1),n=(0,p.default)(a,2),i=n[0],f=n[1],E=(0,g.useState)(!1),k=(0,p.default)(E,2),O=k[0],_=k[1],z=(0,g.useState)(!1),G=(0,p.default)(z,2),R=G[0],W=G[1];(0,y.useRuntimeSagaModels)(e,[(0,j.appTagSagaSyncModelGen)(j.TAGS_SAGA_MODEL_NS),(0,j.appTagOrderSagaSyncModelGen)(j.TAG_APP_ORDER_SAGA_MODEL_NS),(0,j.portalTagOrderSagaSyncModelGen)(j.TAG_ORDER_SAGA_MODEL_NS)]);var P=(0,A.useSelector)(function(e){var t;return(null===e||void 0===e?void 0:null===(t=e[j.TAGS_SAGA_MODEL_NS])||void 0===t?void 0:t.applicationTags)||[]}),Z=(0,A.useSelector)(function(e){var t;return(null===e||void 0===e?void 0:null===(t=e[j.TAG_ORDER_SAGA_MODEL_NS])||void 0===t?void 0:t.tagOrders)||[]}),Q=(0,A.useSelector)(function(e){var t;return(null===e||void 0===e?void 0:null===(t=e[j.TAG_APP_ORDER_SAGA_MODEL_NS])||void 0===t?void 0:t.tagAppOrders)||[]}),U=(0,D.dictBy)(Q,function(e){return null===e||void 0===e?void 0:e.extappTagId},function(e){return null===e||void 0===e?void 0:e.appIdOrder}),K=(0,j.makeTagTree)(P,Z),V=(0,A.useSelector)(function(e){return e["application-management"]}),Y=V.checkedTag,B=V.selectedTag,F=V.editingOrderAppMap,J=V.rightContentView,H=V.applicationVal,q=V.checkList,X=void 0===q?[]:q,$=(0,g.useState)([]),ee=(0,p.default)($,2),te=ee[0],ae=ee[1],ne=(0,g.useState)(""),ie=(0,p.default)(ne,2),re=ie[0],le=ie[1],ue=(0,g.useState)(""),de=(0,p.default)(ue,2),oe=de[0],se=de[1],ce=(0,A.useDispatch)(),pe=function(e){ce({type:"application-management/change",payload:e})},fe=function(e){return pe({checkList:e})},ge=function(e){return pe({checkedTag:e})},he=function(e){return pe({rightContentView:e})},ve=function(e){return pe({applicationVal:e})};function xe(e){he(e)}(0,g.useEffect)(function(){pe({editingOrderAppMap:U})},[JSON.stringify(U)]);var Me="main-tree-right-tag-type-create"===J,me="main-tree-right-tag-type-edit"===J,Ae="changeAppOrder"===J;function Le(){return(0,N.jsx)(g.default.Fragment,null,(0,N.jsx)(s.default,{style:{marginRight:"64px"},type:"primary",onClick:function(){if(w.default.isEmpty(X))return c.default.error("\u8bf7\u5148\u9009\u62e9\u5e94\u7528");pe({modalState:"addTagModal"})}},"\u6807\u7b7e\u8bbe\u7f6e"))}var ye={};function je(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=null===Y||void 0===Y?void 0:Y.checked;if(Ae&&(t=[B]),w.default.isEmpty(t))return H?e.filter(function(e){return((null===e||void 0===e?void 0:e.name)||"").includes(H)}):e;var a=[];return t.map(function(e){a=w.default.union(a,w.default.get(U,e,[]))}),a=a.map(function(e){return ye[e]}),a}w.default.get(V,"application",[]).map(function(e){ye[e.id]||(ye[e.id]=e)});var we=(0,g.useMemo)(function(){var e,t=je(null===V||void 0===V?void 0:V.application);return t=w.default.compact(t),t=Ae&&!w.default.isEmpty(F[B])?F[B].map(function(e){return w.default.find(t,{id:e})}):t,"add"===(null===(e=t[0])||void 0===e?void 0:e.type)&&t.shift(),t}),Te=(0,g.useRef)();function Ce(){return Ae||Me||me?null:(0,N.jsx)("span",{className:"fright itblock font16"},(0,N.jsx)("img",{src:O?S.default:T.default,className:"pointer",style:{color:O?"#6969d7":"#848688"},onMouseEnter:function(){_(!0)},onMouseLeave:function(){_(!1)},title:"\u6807\u7b7e\u7ba1\u7406",type:"control",onClick:function(){xe("main-tree-right-tag-type-edit"),pe({selectedTag:w.default.get(K,"[0].id","")}),f(!1),ge([])}}))}function Se(){return Ae?(0,N.jsx)("span",{title:"\u9000\u51fa\u6392\u5e8f",className:"fright itblock font16"},(0,N.jsx)(u.default,{type:"rollback",onClick:(0,o.default)(d.default.mark(function e(){var t;return d.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:xe(""),he(""),t=w.default.isEmpty(F)?[]:Object.keys(F).map(function(e){return{extappTagId:e,appIdOrder:F[e]}}),t.map(function(){var e=(0,o.default)(d.default.mark(function e(t){return d.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,m.changeTagAppOrder)(t);case 2:e.sent;case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),le("change"),pe({selectedTag:""}),c.default.success("\u4fdd\u5b58\u6210\u529f");case 7:case"end":return e.stop()}},e)}))})):Me||me?null:(0,N.jsx)("span",{style:{marginRight:"10px"},className:"fright itblock font16"},(0,N.jsx)("img",{src:R?I.default:C.default,className:"pointer",style:{color:R?"#6969d7":"#848688"},onMouseEnter:function(){W(!0)},onMouseLeave:function(){W(!1)},title:"\u663e\u793a\u987a\u5e8f",type:"ordered-list",onClick:function(){xe("changeAppOrder"),ge([]),ve("")}}))}function Ie(){return me?i?(0,N.jsx)("span",{title:"\u4fdd\u5b58\u5e76\u9000\u51fa\u6392\u5e8f",className:"fright itblock font16"},(0,N.jsx)(u.default,{type:"check-circle",className:"mg2r pointer",title:"\u4fdd\u5b58\u6392\u5e8f",onClick:(0,o.default)(d.default.mark(function e(){var t,a,n;return d.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return f(!1),t=Te.current.getNextTagAndOrders(),a=t.nextTagOrders,n=t.nextTags,e.next=4,new Promise(function(e,t){window.g_app._store.dispatch({type:"".concat(j.TAG_ORDER_SAGA_MODEL_NS,"/sync"),payload:a,callback:function(t){e()}})});case 4:window.g_app._store.dispatch({type:"".concat(j.TAGS_SAGA_MODEL_NS,"/sync"),payload:n,callback:function(e){c.default.success("\u4fdd\u5b58\u6807\u7b7e\u987a\u5e8f\u6210\u529f")}});case 5:case"end":return e.stop()}},e)}))}),(0,N.jsx)(u.default,{type:"close-circle",className:"mg2r pointer",title:"\u53d6\u6d88\u6392\u5e8f",onClick:function(){Te.current.restoreTagOrders(),f(!1)}})):(0,N.jsx)("span",{style:{marginRight:"10px"},className:"fright itblock font16"},(0,N.jsx)("img",{src:R?I.default:C.default,className:"pointer",style:{color:R?"#6969d7":"#848688"},onMouseEnter:function(){W(!0)},onMouseLeave:function(){W(!1)},title:"\u8c03\u6574\u6807\u7b7e\u6392\u5e8f",onClick:function(){ge([]),f(!0),pe({selectedTag:""})}})):null}return(0,N.jsx)("div",{id:"portal-application-manager",className:"height-100 width-100",style:{background:"#e4eaef"}},(0,N.jsx)(L.default,{path:[{name:"\u7cfb\u7edf\u7ba1\u7406"},{name:"\u5e94\u7528\u7ba1\u7406"}]},null),(0,N.jsx)(h.default,{className:"height-100 split-helper"},(0,N.jsx)("div",{className:"itblock split-helper mari7 bg-white",style:{boxSizing:"border-box",overflowX:"auto",backgroundColor:"#E7E9EB",padding:"10px 0 0 10px"},defaultWeight:250},(0,N.jsx)("div",{className:"overscroll-auto-y",style:{height:"calc(100vh - 48px - 40px)",backgroundColor:"#ffffff",padding:"16px",borderRadius:"4px"}},(0,N.jsx)("div",{className:"mg2b",style:{lineHeight:"20px",height:"20px"}},(0,N.jsx)("div",{style:{paddingRight:"5px",minWidth:"200px"}},(0,N.jsx)("span",{className:"fleft mg3r",style:{color:"#333",height:"20px",lineHeight:"20px"}},"\u6807\u7b7e\u5206\u7ec4"),(0,N.jsx)(g.default.Fragment,null,Ce(),Ie(),Se()))),(0,N.jsx)("div",null,(0,N.jsx)(M.default,{ref:Te,checkedTag:Y,expandedTag:te,selectedTag:B,setCheckedTag:ge,setexpandedTag:ae,rightContentView:J,changeTagOrder:i,setChangeTagOrder:f,tagSearchVal:oe,setTagSearchVal:se})))),(0,N.jsx)("div",{className:"itblock pd2 overscroll-auto-y overscroll-auto-x",defaultWeight:1400,style:{height:"calc(100% - 40px)",boxSizing:"border-box",padding:"10px",paddingLeft:"5px"}},(0,N.jsx)("div",{style:{padding:"16px",borderRadius:"4px",height:"100%",backgroundColor:"#ffffff",overflow:"hidden",minWidth:"1100px"}},Me||me?(0,N.jsx)(x.default,{reuseSagaModel:!0,changeMode:xe,isEditing:me,selectedTag:B,setRightContentView:he}):(0,N.jsx)(g.default.Fragment,null,(0,N.jsx)("div",{className:"pd4 relative"},"changeAppOrder"===J?null:(0,N.jsx)(b,{className:"my-search",allowClear:!0,style:{width:"240px",height:"32px",display:"inline-block"},placeholder:"\u8bf7\u8f93\u5165\u5e94\u7528\u540d\u79f0",defaultValue:H||void 0,onSearch:function(e){ve(e)}}),Ae?null:(0,N.jsx)("span",{style:{fontSize:"14px",marginLeft:"20px",color:"#6969D7"}},"\u5171".concat(we.length,"\u4e2a\u7b26\u5408\u5e94\u7528")),(0,N.jsx)(l.default,(t={style:{marginLeft:"10px",fontSize:"12px"},onChange:function(e){var t=w.default.get(V,"application",[]);e.target.checked?fe(t.map(function(e){return e.id})):fe([])}},(0,r.default)(t,"onChange",function(e){var t=we.map(function(e){return e.id});if(e.target.checked)return fe(w.default.union(t,X));fe(X.filter(function(e){return!t.includes(e)}))}),(0,r.default)(t,"checked",X.length&&w.default.isEqual(w.default.intersection(X,we.map(function(e){return e.id})).sort().toString(),we.map(function(e){return e.id}).sort().toString())),t),"\u5168\u9009/\u5168\u53d6\u6d88"),(0,N.jsx)("div",{className:"vertical-center-of-relative right0"},Ae?null:Le())),(0,N.jsx)(v.default,{batchOperation:X.length>1,rightContentView:J,expandedTag:te,checkedTag:null===Y||void 0===Y?void 0:Y.checked,editingOrderAppMap:F,selectedTag:B,applicationVal:H,orderChanged:re,setOrderChanged:le,checkList:X,setCheckList:fe}))))))}},"0kZ6":function(e,t,a){"use strict";var n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.renderPageTitle=A,t.default=void 0,a("sPJy");var i=n(a("bE4q"));a("5Dmo");var r=n(a("3S7+")),l=n(a("2Taf")),u=n(a("vZ4D")),d=n(a("l4Ni")),o=n(a("ujKo")),s=n(a("MhPg")),c=n(a("q1tI")),p=a("Ty5D"),f=n(a("LvDl")),g=n(a("TSYQ")),h=a("TJpk"),v=a("B+SW"),x=a("qKvR"),M="\u8fd0\u8425\u8d44\u6e90\u51b3\u7b56\u5206\u6790\u7cfb\u7edf";function m(e){return f.default.isString(e)||!e?e:f.default.isArray(e)?m(e[0]):m(f.default.get(e,"props.children"))}function A(e){return(0,x.jsx)(h.Helmet,null,(0,x.jsx)("title",null,e?"".concat(e,"-").concat(M):M))}var L=function(e){function t(){return(0,l.default)(this,t),(0,d.default)(this,(0,o.default)(t).apply(this,arguments))}return(0,s.default)(t,e),(0,u.default)(t,[{key:"shouldComponentUpdate",value:function(e){return!(0,v.isEqualWithReactObj)(this.props,e)}},{key:"render",value:function(){var e=this.props,t=e.path,a=e.children,n=e.extra,l=e.style,u=t.map(function(e){return e.name}).map(m).filter(f.default.identity).join("-");return(0,x.jsx)("div",{className:"nav-bar",style:l},A(u),(0,x.jsx)("div",{className:"fix"},(0,x.jsx)("div",{className:"itblock"},(0,x.jsx)("div",{className:"iblock"},(0,x.jsx)(i.default,null,t.map(function(e,a){var n=e.name,l=void 0===n?"":n,u=e.link,d=l.length>10?(0,x.jsx)(r.default,{title:l},(0,x.jsx)("b",null,l)):(0,x.jsx)("b",null,l);return(0,x.jsx)(i.default.Item,{key:a,className:(0,g.default)("itblock elli",{mw200:a<t.length-1})},u?(0,x.jsx)(p.Link,{style:{color:"#1890ff"},to:e.link},d):d)}))),(0,x.jsx)("div",{className:"itblock mg1l"},n)),(0,x.jsx)("div",{className:"fright line-height42"},a||null)))}}]),t}(c.default.Component);t.default=L},"2KQ9":function(e,t,a){"use strict";var n=a("tAuX"),i=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var r=i(a("eHn4")),l=i(a("qIgq")),u=n(a("q1tI")),d=a("Hg0r"),o=i(a("A9Fo")),s=i(a("LvDl")),c=a("qKvR");function p(e){var t=(0,u.useState)({}),a=(0,l.default)(t,2),n=(a[0],a[1],(0,d.useDispatch)()),i=function(e){return function(t,a){t&&a&&e({type:t,payload:a})}},p=i(n),f=(0,d.useSelector)(function(e){return e["application-management"].selectedTag}),g=e.apps,h=(0,u.useRef)(),v=(0,u.useState)(null),x=(0,l.default)(v,2),M=x[0],m=x[1];function A(e){for(var t=[],a=0;a<e.length;a++)t.push(L(e[a]));return t}function L(e){var t=e.id,a=e.name,n=e.img,i=document.createElement("div"),r=n?"<img class='application-manager-grid-item-top-img' src=".concat(n,"></img>"):"<span>\u6682\u65e0\u7f29\u7565\u56fe</span>";return i.innerHTML='<div class="muuri-grid-item" id="'+f+"|"+t+'" data-id="'+t+'"><div class="muuri-grid-item-content">'+"<div class='application-manager-grid-item'>\n                          <div class='application-manager-grid-item-top'>\n                            ".concat(r,"\n                          </div>\n                          <div title=").concat(a," class='application-manager-grid-item-bottom'>\n                            ").concat(a,"\n                          <div>\n                        </div>")+"</div></div>",i.firstChild}function y(e,t){var a=e.getItems();e.hide(a,{onFinish:function(t){e.remove(t,{removeElements:!0})}})}return(0,u.useEffect)(function(){var e=new o.default(".muuri-grid",{dragEnabled:!0,dragContainer:document.getElementById("applications-management-layout"),dragSort:!0,dragPlaceholder:{enabled:!0,duration:400}}).on("dragReleaseEnd",function(){var t,a=e._items.map(function(e){var a=e._element.id.split("|"),n=(0,l.default)(a,2),i=n[0],r=n[1];return t=i,r});p("application-management/changeEditingOrderAppMap",(0,r.default)({},t,a))});m(e)},[h]),(0,u.useEffect)(function(){if(!s.default.isEmpty(M)){var e=A(g);y(M),M.add(e)}},[g]),(0,c.jsx)("div",{id:"applications-management-layout",style:{width:"100%",height:"100%"}},(0,c.jsx)("div",{className:"muuri-grid"}))}},"3wGX":function(e,t,a){"use strict";var n=a("tAuX"),i=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=x,a("P2fV");var r=i(a("NJEC"));a("+L6B");var l=i(a("2/Rp"));a("sRBo");var u=i(a("kaz8")),d=i(a("gWZ8")),o=i(a("d6i3"));a("miYZ");var s=i(a("tsqr")),c=i(a("1l/V")),p=(n(a("q1tI")),a("g96v"),a("hdZo")),f=a("Hg0r"),g=i(a("LvDl")),h=i(a("E/Nb")),v=a("qKvR");function x(e){var t=e.showModal,a=e.setApp,n=e.setCheckList,i=(e.setModalState,e.checkList),x=void 0===i?[]:i,M=e.isOrdering,m=(null===e||void 0===e?void 0:e.app)||{},A=(0,f.useDispatch)();function L(){return(0,v.jsx)("div",{className:"pointer",style:{textAlign:"center",paddingTop:"40px",backgroundColor:"#F3F3F3",width:"228px",height:"170px",marginRight:"20px",marginBottom:"20px"},onClick:function(){t("addApp")}},(0,v.jsx)("div",null,(0,v.jsx)("img",{style:{width:"52px",height:"52px"},src:h.default})),(0,v.jsx)("div",{style:{fontSize:"14px"},className:"mg2t"},"\u6dfb\u52a0\u66f4\u591a\u5e94\u7528"))}if("add"===m.type)return L();var y=function(){var e=(0,c.default)(o.default.mark(function e(t){var a;return o.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,p.deleteApplication)(t);case 2:if(a=e.sent,a){e.next=5;break}return e.abrupt("return",s.default.error("\u5220\u9664\u5931\u8d25"));case 5:n(g.default.difference(x,[t.id])),s.default.success("\u5220\u9664\u6210\u529f"),A({type:"application-management/initApplications"});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return(0,v.jsx)("div",{className:"btn-group-parent",style:{backgroundColor:"#fff",width:"228px",height:"170px",position:"relative",marginRight:"20px",marginBottom:"20px"}},(0,v.jsx)("div",{style:{height:"130px",borderRadius:"6px",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center"}},g.default.isEmpty(m.img)?(0,v.jsx)("span",null,"\u6682\u65e0\u7f29\u7565\u56fe"):(0,v.jsx)("img",{style:{width:"100%",height:"130px",pointerEvents:"none"},alt:"\u56fe\u7247",src:m.img})),(0,v.jsx)("div",{className:"aligncenter",id:"application-item-checkbox",style:{lineHeight:"62px",height:"40px"}},(0,v.jsx)(u.default,{style:{width:"16px",height:"16px",verticalAlign:"top",lineHeight:"16px",position:"absolute",top:"10px",left:"10px"},onChange:function(e){e.target.checked?n([].concat((0,d.default)(x),[m.id])):n(g.default.difference(x,[m.id]))},checked:g.default.includes(x,m.id)}),(0,v.jsx)("div",{className:"elli itblock",style:{width:"100%",height:"100%",lineHeight:"40px",textAlign:"left"},title:m.name},m.name),(0,v.jsx)("div",{className:"btn-grop",style:{display:M?"none":"inline-block",position:"relative",textAlign:"right",height:"100%"}},(0,v.jsx)(l.default,{icon:"edit",style:{width:"62px",height:"24px",fontSize:"12px",color:"#6969D7",borderRadius:"4px",padding:"4px 8px",lineHeight:"16px",position:"absolute",top:"-32px",right:"48px"},onClick:function(){t("editApp"),a(m)}},"\u7f16\u8f91"),(0,v.jsx)(r.default,{placement:"topLeft",title:"\u60a8\u786e\u5b9a\u5220\u9664\u5417?",onConfirm:function(){y(m)},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},(0,v.jsx)(l.default,{icon:"delete",style:{fontSize:"12px",padding:"4px",height:"24px",width:"24px",borderRadius:"50%",lineHeight:"12px",position:"absolute",color:"red",top:"-32px",right:"8px"}})))))}},"4lOa":function(e,t,a){"use strict";var n=a("tAuX"),i=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(a("gWZ8"));a("y8nQ");var l=i(a("Vl3Y"));a("2qtc");var u=i(a("kLXV")),d=i(a("d6i3"));a("miYZ");var o=i(a("tsqr")),s=i(a("qIgq")),c=i(a("1l/V"));a("5NDa");var p=i(a("5rEg"));a("ozfa");var f=i(a("MJZm"));a("OaEy");var g=i(a("2fM7")),h=n(a("q1tI")),v=i(a("LvDl")),x=a("Hg0r"),M=a("hdZo"),m=a("r9/Z"),A=a("B+SW"),L=a("qKvR"),y=(g.default.Option,f.default.TreeNode),j=p.default.Search,w=function e(t,a){for(var n,i=0;i<a.length;i++){var r=a[i];r.children&&(r.children.some(function(e){return e.name===t})?n=r.id:e(t,r.children)&&(n=e(t,r.children)))}return n};function T(e){return C.apply(this,arguments)}function C(){return C=(0,c.default)(d.default.mark(function e(t){var a,n,i,l,u,s,c,p,f,g,h,x,A,L,y,j;return d.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:for(y in a=t.checkedKeys,n=t.appTagRelationData,i=void 0===n?{}:n,l=t.dispatch,u=t.props,s=u.application,c=void 0===s?[]:s,p=u.checkList,f=void 0===p?[]:p,g=[],c.map(function(e){var t;v.default.includes(f,e.id)&&(t=g).push.apply(t,(0,r.default)(a.map(function(t){return{extappId:e.id,extappTagId:t}})));return e}),h=(null===i||void 0===i?void 0:i.appTagRelation)||[],x={},h.map(function(e){f.includes(e.extappId)&&(x[e.extappId]||(x[e.extappId]=[]),x[e.extappId].push(e.extappTagId))}),g=g.map(function(e){x[e.extappId]||(x[e.extappId]=[]),x[e.extappId].includes(e.extappTagId)||x[e.extappId].push(e.extappTagId)}),A=[],L=function(e){x[e].map(function(t){A.push({extappId:e,extappTagId:t})})},x)L(y);return e.next=13,(0,M.batchAddTag)({data:A});case 13:if(j=e.sent,j.success){e.next=16;break}return e.abrupt("return",o.default.error("\u6807\u7b7e\u4fee\u6539\u5931\u8d25"));case 16:o.default.success("\u6807\u7b7e\u4fee\u6539\u6210\u529f"),l({type:"appTagRelation/fetch"}),l({type:"".concat(m.TAGS_SAGA_MODEL_NS,"/fetch")}),l({type:"".concat(m.TAG_APP_ORDER_SAGA_MODEL_NS,"/fetch")}),l({type:"getAppTags/fetch"});case 21:case"end":return e.stop()}},e)})),C.apply(this,arguments)}function S(e){return I.apply(this,arguments)}function I(){return I=(0,c.default)(d.default.mark(function e(t){var a,n,i,r,l,u,s,c,p,f;return d.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.preKeys,n=t.checkedKeys,i=t.app,r=t.dispatch,l=t.tagAppOrder_tagId_map,v.default.isEmpty(a)&&(a.push("unTyped"),n.push("unTyped")),u=n,n||u.push("unTyped"),n.length>1&&(u=u.filter(function(e){return"unTyped"!==e})),s=v.default.difference(a,u),c=v.default.difference(u,a),p={},s.map(function(e){l[e]||(l[e]=[]),p[e]=l[e].filter(function(e){return e!==i})}),c.map(function(e){l[e]||(l[e]=[]),p[e]=v.default.concat(l[e],i)}),e.next=12,(0,M.creatAppTagrelation)({shouldAdd:c,shouldDel:s,shouldChange_tagAppOrderMap:p,appId:i});case 12:if(f=e.sent,"success"===f.msg){e.next=15;break}return e.abrupt("return",!1);case 15:return r({type:"appTagRelation/fetch"}),r({type:"".concat(m.TAGS_SAGA_MODEL_NS,"/fetch")}),r({type:"".concat(m.TAG_APP_ORDER_SAGA_MODEL_NS,"/fetch")}),r({type:"getAppTags/fetch"}),o.default.success("\u63d0\u4ea4\u6210\u529f"),e.abrupt("return",!0);case 21:case"end":return e.stop()}},e)})),I.apply(this,arguments)}function D(e){var t=e.visible,a=e.handleCancel,n=(e.batchAddTag,e.batchOperation),i=e.checkList,r=void 0===i?[]:i,l=(e.app,(0,h.useState)([])),p=(0,s.default)(l,2),g=p[0],M=p[1],C=(0,h.useState)([]),I=(0,s.default)(C,2),D=I[0],N=I[1],b=(0,h.useState)([]),E=(0,s.default)(b,2),k=E[0],O=E[1],_=(0,h.useState)(""),z=(0,s.default)(_,2),G=z[0],R=z[1],W=(0,x.useDispatch)(),P=(0,x.useSelector)(function(e){var t;return(null===e||void 0===e?void 0:null===(t=e[m.TAGS_SAGA_MODEL_NS])||void 0===t?void 0:t.applicationTags)||[]}),Z=(0,x.useSelector)(function(e){var t;return(null===e||void 0===e?void 0:null===(t=e[m.TAG_ORDER_SAGA_MODEL_NS])||void 0===t?void 0:t.tagOrders)||[]}),Q=(0,x.useSelector)(function(e){var t;return(null===e||void 0===e?void 0:null===(t=e[m.TAG_APP_ORDER_SAGA_MODEL_NS])||void 0===t?void 0:t.tagAppOrders)||[]}),U=(0,A.dictBy)(Q,function(e){return null===e||void 0===e?void 0:e.extappTagId},function(e){return null===e||void 0===e?void 0:e.appIdOrder}),K=v.default.keyBy(P,"id"),V=(0,m.makeTagTree)(P,Z),Y=(0,x.useSelector)(function(e){return(null===e||void 0===e?void 0:e.appTagRelation)||[]});function B(e){var t=e.name.indexOf(G),a=e.name.substr(0,t),n=e.name.substr(t+G.length),i=t>-1?(0,L.jsx)("span",null,a,(0,L.jsx)("span",{style:{color:"#f50"}},G),n):(0,L.jsx)("span",null,e.name);return(0,L.jsx)(y,{title:i,key:e.id},((null===e||void 0===e?void 0:e.children)||[]).map(function(e){return B(e)}))}return(0,h.useEffect)(function(){if(1!==r.length)return O([]),M([]),void N([]);var e=[],t=[],a=(null===Y||void 0===Y?void 0:Y.appTagRelation)||[];a.map(function(a,n){if(a.extappId===r[0]){if(e.push(a.extappTagId),!K[a.extappTagId].parentId)return;t.push(K[a.extappTagId].parentId)}}),O(t),M(e),N(e)},[r.length]),(0,L.jsx)(u.default,{width:"654px",bodyStyle:{height:"530px",overflowY:"scroll"},maskClosable:!1,visible:t,title:"\u9009\u62e9\u5e94\u7528\u6807\u7b7e",okText:"\u63d0\u4ea4",cancelText:"\u53d6\u6d88",onCancel:function(){a(),R("")},onOk:(0,c.default)(d.default.mark(function t(){var i;return d.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=7;break}if(!v.default.isEmpty(g)){t.next=3;break}return t.abrupt("return",o.default.error("\u6ca1\u9009\u62e9\u4efb\u4f55\u6807\u7b7e"));case 3:return t.next=5,T({checkedKeys:g,appTagRelationData:Y,dispatch:W,props:e});case 5:t.next=13;break;case 7:return t.next=9,S({preKeys:D,checkedKeys:g,app:r[0],tagAppOrder_tagId_map:U,dispatch:W});case 9:if(i=t.sent,i){t.next=12;break}return t.abrupt("return",o.default.error("\u63d0\u4ea4\u5931\u8d25"));case 12:a();case 13:R("");case 14:case"end":return t.stop()}},t)}))},(0,L.jsx)(h.default.Fragment,null,(0,L.jsx)(j,{className:"my-tag-search",allowClear:!0,placeholder:"\u8f93\u5165\u6807\u7b7e\u540d\u79f0",style:{fontSize:"14px"},size:"large",onChange:function(e){return R(e.target.value)},value:G,onSearch:function(e){var t=P.map(function(t){return t.name.indexOf(e)>-1?w(t.name,V):null}).filter(function(e,t,a){return e&&a.indexOf(e)===t}),a=[];function n(e){var t,i,r;(null===(t=K[e])||void 0===t?void 0:t.parentId)&&(a.push(null===(i=K[e])||void 0===i?void 0:i.parentId),n(null===(r=K[e])||void 0===r?void 0:r.parentId))}t.map(function(e){a.push(e),n(e)}),a=v.default.union(a),R(e),O(a)}}),(0,L.jsx)(f.default,{checkable:!0,checkStrictly:!0,expandedKeys:k,checkedKeys:g,onCheck:function(e){M(e.checked)},onExpand:function(e,t){var a=t.node,n=a.props.eventKey,i=[];return k.includes(n)?(i=k.filter(function(e){return e!==n}),O(i)):O(v.default.concat(k,n))}},V.filter(function(e){return"unTyped"!==e.id}).map(function(e){return B(e)}))))}var N=l.default.create()(D);t.default=N},"E/Nb":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAGU0lEQVRoQ+VaW2xUZRD+5pxTS3URFMFbVERBTbxwk3JJFHyjoA9i1nOBRCwBExW8gCaaGOKDmgAqCioERALn0o344KU+KWAUAaOAviAoRMGEAArK6rJ0zz9mytlmLW13TzkLad3Hds7MfP/8M//cCAn+giAYxsx3M/NwAMOI6AZmvgxA30jMCSI6ysw/A9hDRDuJaLNpmnuSUoPOltH69etvI6KZAKYR0bXd4cfMvwLYQETv2bb9fXd4FL/pFiBmJs/zJhPR8wDGlyhwGMAmItpKRLtbWlr21dbWHkmlUn8LTTabvSifzw/Udf16IrqFmccCmAhgUAmPLUT0kmmazUTEccHFBuS67ihN05ZFyoi8Y0TkMrNnWZYAiaWEHE5TU9PoMAwtInoIwCXCVA5FKfWY4zjfxgFVMaA1a9b0qa2tfRnAXAAagEMAFhuGsSKdTmfjCO2MNpPJpAqFwhwA8wFcAUAx87JTp049O3PmzJOVyKgIkOu6Q4koA0CcvcDMb9bU1LyQFJD2igqwlpaWF4nocQAGgJ3MnHYcZ285UGUBeZ43DsDHAC4FsFvTNMc0ze/KMU7i/0EQjFRKuQBuBvAHgKm2bX/dFe8uAQVBMDkMw/eJ6EIAHymlpk+fPv2vJJStlMfq1av71tXVCah7mfkfXdcfME3z086+7xSQ7/v1SqnPBQwRrdZ1fU46nQ4rVSRJukwmo4dhuIKZGwWUpmn3WJa1rSMZHQJat27djbqubwUwAMC7lmXNihu9kgQkvCQa+r6/CsDDcv0kynbkU2cAam5urj1+/Ljc0xEAPjQM4/7zZZkOgoVeKBQ+AHAfgB39+/cf19DQkC+lOwOQ67pLiUhC8z7DMEam0+k/kz7ts+GXyWT6FQoFCUpDmPkNx3HmdQpIHk0ikrvJkUljPWpno2icbyM9xSWImetLH982C0V3VIjGAHjVtu2n4wjpitbzvNbswbbtss9EpTI9z1sC4CnJKEzTHF/08TYBvu9PYWZ5bw7lcrlhjY2NJyplXo6uGoCirEKy9CuJaKplWZ+0pkxFZXzf/5KZJxDRAsuyFpdTMs7/qwFI5LuuO4+IXgewxbbtCW2APM+7HcAuCYeGYVyXdEpTLUCZTKauUCgckOdF07ThpmnuarWQ67qLiEgSwqW2bT8R5/Qroa0WIJHteZ5YSCLdEtu257cC8jzvIICrNU0bY5rmN5UoGYemmoCCILhTKbUdwEHbtq+hIAhuVUr9AOCIZVmXVyMjqCagKDpLKTNI07SbpPKU+uMdZm5yHMeMc/KV0lYTUOQyARE9yMxzJD+SpG82gCdt25b7mPiv2oA8zxO/fw3AW2KhzQDuYuYpjuM0J47mtI8m/rCW6illjlKqmZk/E0D7AQwOw3DojBkzfuqJgKLqYC8R7RdAUrD1VUr1q1bxVm0LRUWg4MgKoNjXofhNNaxZyjNO7lfUqVcAymQyFxQKBamLTrVduVwud3GSCWnpSXfnFsSx/tq1awfU1NQcBfB7rwoKUpT2qrAN4Ite9bAS0UoB9Agzv91rUp9el5xG5cNvAK7qieWD7/ujmVlKntPlQwRISm5pivSOAi8IgjuUUjsljhuGMbjHl+CRlb6SaVxPapL4vj+XmZee0SQRQKVtLMMwhiZppWpkCmXbWD2w0Vj0++2WZY09o9EYlbJtrWAiGmNZ1o44OdW5ovV9fwQzS2Ok81ZwUZmSZv3uXC43ploJa3fBR7WP9N9lit51s16ERMPhLT1hnJLP58e3HyZ32DyPhsRyCjJiX2VZ1uxqtLfiWCny8ZUAZgE4rmlafUcbKP+PkWSJPzUQ0QYAfWRonMvlnHPtU6VDYwAnmXlaV92psvMa13UnRaDk+p3Psf6xCMzGrq5qWUBROP/P4oXkfIZhLEzy8S1VMno0F0ZN+GQXL4qCouj3CgDZ7iiuxiwyDGNlUsAiINLFXVBcjQGwPJ/PP5Poakzp6UXzzeUA6qO/n/XyUhAEo5RSdunyEoBtzPxo1ZaXSkFJCA2CoIGZn2u/XsbMG2XuKf4WhuF+TdMOZ7PZ1uWmVCqV0nV9oFJqiKy7yGCaiCad1/Wy9g6ZxAIggAPMLCs452cBsLMoIyuaYRhOlPGgUkpWNAdHS0+p6BuxlCwh/UJEP0oNpuv6piRXNP8F9czP/Md/ZBEAAAAASUVORK5CYII="},SdiA:function(e,t,a){"use strict";var n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("p0pE")),r=n(a("Y/ft")),l=n(a("2Taf")),u=n(a("vZ4D")),d=n(a("l4Ni")),o=n(a("ujKo")),s=n(a("rlhR")),c=n(a("MhPg")),p=n(a("jehZ")),f=n(a("q1tI")),g=(n(a("17x9")),n(a("i8i4"))),h=n(a("LvDl")),v=a("qKvR");var x=30,M={name:"1ga8qrm",styles:"display:inline-block;background:#000;opacity:.0;height:100%;width:11px;margin:0 -5px;border-left:5px solid rgba(255,255,255,0);border-right:5px solid rgba(255,255,255,0);cursor:col-resize;background-clip:padding-box;transition:all .2s ease;&:hover{opacity:.2;border-left:5px solid rgba(0,0,0,0.5);border-right:5px solid rgba(0,0,0,0.5);}"};function m(e){return(0,v.jsx)("div",(0,p.default)({},e,{css:M}))}var A=function(e){return e?[].concat(e):[]},L=function(e){function t(){var e,a;(0,l.default)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return a=(0,d.default)(this,(e=(0,o.default)(t)).call.apply(e,[this].concat(i))),a.state={forceWeight0:null},a.isAdjusting=!1,a.onSeparatorMouseDown=function(e){e.stopPropagation(),e.preventDefault(),a.isAdjusting=!0,a.startDragX=e.clientX;var t=g.default.findDOMNode((0,s.default)(a));a.totalWidth=t.offsetWidth,a.initWidth1=t.children[2].offsetWidth},a.onMouseMoveThrottle=h.default.throttle(function(e){var t=a.props,n=t.collapseWidth,i=t.isAdjustable,r=e-a.startDragX,l=i?a.totalWidth-1:a.totalWeight,u=a.initWidth1-r,d=l-u;d<n?0!==a.state.forceWeight0&&a.setState({forceWeight0:0}):u<n?a.state.forceWeight0!==a.totalWeight&&a.setState({forceWeight0:a.totalWeight}):a.setState({forceWeight0:a.totalWeight*d/l})},100,{leading:!1}),a.onMouseUp=function(e){a.isAdjusting&&(e.stopPropagation(),e.preventDefault(),a.isAdjusting=!1)},a}return(0,c.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){var e=this.props.children;e=A(e).filter(h.default.identity),this.totalWeight=e.map(function(e){return e.props.defaultWeight}).filter(h.default.isNumber).reduce(function(e,t){return e+t},0)}},{key:"componentWillReceiveProps",value:function(e){if(!h.default.isEqual(e.children,this.props.children)){var t=e.children;t=A(t).filter(h.default.identity);var a=t.map(function(e){return e.props.defaultWeight}).filter(h.default.isNumber).reduce(function(e,t){return e+t},0),n=A(e.children).length!==A(this.props.children).length;(n||a!==this.totalWeight)&&(this.totalWeight=a,this.setState({forceWeight0:null}))}}},{key:"renderCollapsedChild",value:function(e){var t=this;return(0,v.jsx)("div",{key:"placeholder",className:"color-black itblock aligncenter border-dashed mg1 width20 pointer",style:{height:"calc(100% - 10px)",position:"relative"},onClick:function(){return t.setState({forceWeight0:null})}},(0,v.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",wordBreak:"break-word"}},e||"\u3002\u3002\u3002"))}},{key:"recreateChildren",value:function(e,t){var a=0===t,n=this.state.forceWeight0,l=this.props.isAdjustable?"100% - 1px":"100%",u=null,d=null;if(a)0===n?d=this.renderCollapsedChild(e.props.collapseTitle):u=n===this.totalWeight?"calc(".concat(l," - ").concat(x,"px)"):"".concat(100*(n||e.props.defaultWeight)/this.totalWeight,"%");else if(0===n)u="calc(".concat(l," - ").concat(x,"px)");else if(n===this.totalWeight)d=this.renderCollapsedChild(e.props.collapseTitle);else{var o="".concat(100*(n||this.props.children[0].props.defaultWeight)/this.totalWeight,"%");u="calc(".concat(l," - ").concat(o,")")}var s=e.type,c=e.props,f=(c.collapseTitle,c.defaultWeight,c.style),g=(0,r.default)(c,["collapseTitle","defaultWeight","style"]),h=e.ref;return[(0,v.jsx)(s,(0,p.default)({ref:h,key:t,style:(0,i.default)({},f,{width:null===u?void 0:u,display:null===u?"none":"inline-block",verticalAlign:"top"})},g)),d]}},{key:"render",value:function(){var e=this,a=this.props,n=a.children,l=a.isAdjustable,u=a.collapseWidth,d=(0,r.default)(a,["children","isAdjustable","collapseWidth"]),o=(0,i.default)({},d,{className:"split-helper horizontal ".concat(d.className||""),onMouseMove:function(t){if(e.isAdjusting){t.stopPropagation(),t.preventDefault();var a=t.clientX;e.onMouseMoveThrottle(a)}},onMouseUp:this.onMouseUp});if(n=A(n).filter(h.default.identity),n.length<=0)return(0,v.jsx)("div",o);if(1===n.length)return(0,v.jsx)("div",o,this.recreateChildren(n[0],0));if(2===n.length)return(0,v.jsx)("div",o,this.recreateChildren(n[0],0),l?(0,v.jsx)(m,{onMouseDown:this.onSeparatorMouseDown}):null,this.recreateChildren(n[1],1));var s=(0,v.jsx)(t,{className:"height-100 itblock",isAdjustable:l,collapseWidth:u,defaultWeight:this.totalWeight-n[0].props.defaultWeight},h.default.drop(n,1));return(0,v.jsx)("div",o,this.recreateChildren(n[0],0),l?(0,v.jsx)(m,{onMouseDown:this.onSeparatorMouseDown}):null,this.recreateChildren(s,1))}}]),t}(f.default.Component);t.default=L,L.defaultProps={isAdjustable:!0,collapseWidth:60}},UUG7:function(e,t,a){"use strict";var n=a("tAuX"),i=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(a("d6i3"));a("2qtc");var l=i(a("kLXV"));a("DZo9");var u=i(a("8z0m"));a("+L6B");var d=i(a("2/Rp"));a("Pwec");var o=i(a("CtXQ"));a("miYZ");var s=i(a("tsqr"));a("7Kak");var c=i(a("9yH6"));a("y8nQ");var p=i(a("Vl3Y"));a("5NDa");var f=i(a("5rEg")),g=i(a("p0pE")),h=i(a("qIgq")),v=i(a("1l/V"));a("OaEy");var x=i(a("2fM7")),M=n(a("q1tI")),m=a("nO+Y"),A=a("Hg0r"),L=(a("g96v"),a("r9/Z")),y=a("hdZo"),j=i(a("LvDl")),w=a("qKvR");x.default.Option;function T(e){return C.apply(this,arguments)}function C(){return C=(0,v.default)(r.default.mark(function e(t){var a,n,i,l,u,d,o;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.form,n=t.dispatch,t.applications,i=t.handleCancel,l=t.imgSrc,u=t.checkedTag,e.next=3,(0,m.validateFieldsByForm)(a);case 3:if(d=e.sent,d){e.next=6;break}return e.abrupt("return",s.default.error("\u8bf7\u586b\u5199\u5fc5\u586b\u9879"));case 6:return d.img=l,d.checkedTag=u,e.next=10,(0,y.creatApplication)(d);case 10:if(o=e.sent,o){e.next=13;break}return e.abrupt("return",s.default.error("\u521b\u5efa\u5931\u8d25"));case 13:s.default.success("\u521b\u5efa\u6210\u529f"),n({type:"application-management/initApplications"}),n({type:"".concat(L.TAGS_SAGA_MODEL_NS,"/fetch")}),n({type:"".concat(L.TAG_APP_ORDER_SAGA_MODEL_NS,"/fetch")}),a.resetFields(),i();case 19:case"end":return e.stop()}},e)})),C.apply(this,arguments)}function S(e){return I.apply(this,arguments)}function I(){return I=(0,v.default)(r.default.mark(function e(t){var a,n,i,l,u,d,o;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.form,n=t.dispatch,t.applications,i=t.app,l=t.handleCancel,u=t.imgSrc,e.next=3,(0,m.validateFieldsByForm)(a);case 3:if(d=e.sent,d){e.next=6;break}return e.abrupt("return",s.default.error("\u8bf7\u586b\u5199\u5fc5\u586b\u9879"));case 6:return d.img=u,e.next=9,(0,y.updateApplication)((0,g.default)({},i,d));case 9:if(o=e.sent,o.success){e.next=12;break}return e.abrupt("return",s.default.error("\u4fdd\u5b58\u5931\u8d25"));case 12:return n({type:"application-management/initApplications"}),l(),e.abrupt("return",s.default.success("\u4fdd\u5b58\u6210\u529f"));case 15:case"end":return e.stop()}},e)})),I.apply(this,arguments)}function D(e){var t=(0,A.useDispatch)(),a=(0,A.useSelector)(function(e){return null===e||void 0===e?void 0:e.getApplications}),n=(0,M.useState)(""),i=(0,h.default)(n,2),r=i[0],v=i[1],x={labelCol:{span:4},wrapperCol:{span:18}},m=e.form.getFieldDecorator,L=e.visible,y=e.handleCancel,C=e.app;(0,M.useEffect)(function(){v(null===C||void 0===C?void 0:C.img)},[JSON.stringify(C)]);var I="editApp"===(null===e||void 0===e?void 0:e.modalState);return(0,w.jsx)(M.default.Fragment,null,(0,w.jsx)(l.default,{width:"654px",height:"530px",maskClosable:!1,visible:L,title:I?"\u7f16\u8f91\u5e94\u7528":"\u521b\u5efa\u5e94\u7528",okText:"\u63d0\u4ea4",cancelText:"\u53d6\u6d88",destroyOnClose:!0,onCancel:function(){y(),v("")},onOk:function(){I?S((0,g.default)({dispatch:t,applications:a,app:C,handleCancel:y,imgSrc:r},e)):T((0,g.default)({dispatch:t,applications:a,handleCancel:y,imgSrc:r},e)),v("")}},(0,w.jsx)(p.default,x,(0,w.jsx)(p.default.Item,{label:"\u5e94\u7528\u540d\u79f0"},m("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0"},{min:2,max:20,type:"string",required:!0,pattern:new RegExp(/^[\S]/,"g"),message:"\u8bf7\u8f93\u5165\u5e94\u7528\u540d\u79f0\uff0c\u957f\u5ea6\u4e3a2\u81f320\u4e2a\u5b57\u7b26,\u4e14\u5f00\u5934\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:I?C.name:void 0})((0,w.jsx)(f.default,null))),(0,w.jsx)(p.default.Item,{label:"\u5e94\u7528URL"},m("url",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165url"},{pattern:new RegExp(/^((ht|f)tps?):\/\/[\w\-]+(\.[\w\-]+)+([\w\-.,@?^=%&:\/~+#]*[\w\-@?^=%&\/~+#])?$/,"g"),message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7f51\u5740\uff0c\u5982https://www.baidu.com"}],initialValue:I?C.url:void 0})((0,w.jsx)(f.default,null))),(0,w.jsx)(p.default.Item,{label:"\u6253\u5f00\u65b9\u5f0f"},m("openWay",{initialValue:(null===C||void 0===C?void 0:C.openWay)||"innerTab"})((0,w.jsx)(c.default.Group,null,(0,w.jsx)(c.default,{key:"openWay-innerTab",value:"innerTab"},"\u9875\u5185\u6807\u7b7e\u9875"),(0,w.jsx)(c.default,{key:"openWay-browserTab",value:"browserTab"},"\u6d4f\u89c8\u5668\u6807\u7b7e\u9875")))),(0,w.jsx)(p.default.Item,{label:"\u7f29\u7565\u56fe",extra:"\u8bf7\u4e0a\u4f20\u5c0f\u4e8e43kb\u7684\u56fe\u7247\n\u7c7b\u578b\u4e3asvg/jepg/png/jpg."},m("img")((0,w.jsx)(u.default,{accept:"image/svg+xml,image/png,image/jpeg,image/jpg",fileList:[],beforeUpload:function(e){var t=["image/svg+xml","image/jpeg","image/png","image/jpg"];if(!j.default.includes(t,e.type))return v(""),s.default.error("\u8bf7\u4e0a\u4f20\u56fe\u7247");if(e.size>44225)return s.default.error("\u56fe\u7247\u592a\u5927");var a=new FileReader;return a.onload=function(e){v(e.target.result)},a.readAsDataURL(e),!1}},(0,w.jsx)(d.default,null,(0,w.jsx)(o.default,{type:"upload"})," \u9009\u62e9\u56fe\u7247\u6587\u4ef6"),r?(0,w.jsx)("img",{id:"unlodaImg",alt:"\u56fe\u7247",style:{width:"50px",height:"30px"},src:r||C.img}):null))),(0,w.jsx)(p.default.Item,{label:"\u5e94\u7528\u63cf\u8ff0"},m("description",{initialValue:I?C.description:""})((0,w.jsx)(f.default.TextArea,{rows:5}))))))}var N=p.default.create()(D);t.default=N},VNuU:function(e,t,a){"use strict";var n=a("tAuX"),i=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=x;var r=i(a("qIgq")),l=n(a("q1tI")),u=i(a("LvDl")),d=i(a("UUG7")),o=i(a("4lOa")),s=a("Hg0r"),c=a("g96v"),p=i(a("2KQ9")),f=a("r9/Z"),g=i(a("3wGX"));a("xEJd");var h=a("B+SW"),v=a("qKvR");function x(e){var t=(0,s.useDispatch)(),a=(0,s.useSelector)(function(e){return e["application-management"].modalState}),n=function(e){t({type:"application-management/change",payload:{modalState:e}})},i=(0,l.useState)({}),x=(0,r.default)(i,2),M=x[0],m=x[1],A=(0,s.useSelector)(function(e){return e["application-management"].selectedTag}),L=(0,s.useSelector)(function(e){return e["application-management"].editingOrderAppMap});(0,c.useRuntimeSagaModels)(e,[(0,f.appTagRelationSagaSyncModelGen)("appTagRelation"),(0,f.appTagSagaSyncModelGen)(f.TAGS_SAGA_MODEL_NS),(0,f.appTagOrderSagaSyncModelGen)(f.TAG_APP_ORDER_SAGA_MODEL_NS)]),(0,l.useEffect)(function(){t({type:"".concat(f.TAGS_SAGA_MODEL_NS,"/fetch")}),t({type:"".concat(f.TAG_APP_ORDER_SAGA_MODEL_NS,"/fetch")}),e.setOrderChanged("")},[e.orderChanged]);var y="changeAppOrder"===(null===e||void 0===e?void 0:e.rightContentView),j=(0,s.useSelector)(function(e){return e["application-management"]}),w={};u.default.get(j,"application",[]).map(function(e){w[e.id]||(w[e.id]=e)});var T=(0,s.useSelector)(function(e){var t;return(null===e||void 0===e?void 0:null===(t=e[f.TAG_APP_ORDER_SAGA_MODEL_NS])||void 0===t?void 0:t.tagAppOrders)||[]}),C=(0,h.dictBy)(T,function(e){return null===e||void 0===e?void 0:e.extappTagId},function(e){return null===e||void 0===e?void 0:e.appIdOrder}),S=function(e){n(e)},I=function(e){n(!1)};function D(){var t,a,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];"add"===(null===(t=n[0])||void 0===t?void 0:t.type)||e.rightContentView||e.applicationVal||n.unshift({id:"addNode",type:"add"});var i=e.checkedTag;if(u.default.isEmpty(i))return e.applicationVal?n.filter(function(t){return((null===t||void 0===t?void 0:t.name)||"").includes(e.applicationVal)}):n;var r=[];return i.map(function(e){r=u.default.union(r,u.default.get(C,e,[]))}),r=r.map(function(e){return w[e]}),"add"===(null===(a=r[0])||void 0===a?void 0:a.type)||e.rightContentView||e.applicationVal||r.unshift({id:"addNode",type:"add"}),r}var N=D(null===j||void 0===j?void 0:j.application);return N=u.default.compact(N),y&&!A&&(N=[]),y&&A&&(N=L[A]?L[A].map(function(e){return w[e]}).filter(u.default.identity):[]),(0,v.jsx)("div",{style:{minWidth:"1200px",marginBottom:"78px",overflowY:"auto",height:"100%"}},(0,v.jsx)("div",null,(0,v.jsx)(d.default,{visible:"addApp"===a||"editApp"===a,handleCancel:I,app:M,modalState:a,checkedTag:null===e||void 0===e?void 0:e.checkedTag,reuseSagaModel:!0}),(0,v.jsx)(o.default,{reuseSagaModel:!0,visible:"addTagModal"===a,handleCancel:I,application:u.default.get(j,"application",[]),checkList:e.checkList,batchOperation:e.batchOperation,batchAddTag:function(){e.setCheckList([])},expandedTag:e.expandedTag,app:M,setApp:m}),y?(0,v.jsx)(p.default,{apps:N}):(0,v.jsx)("div",{id:"applications-management-layout",style:{width:"100%",height:"100%",display:"flex",flexWrap:"wrap"}},N.map(function(t){return(0,v.jsx)(g.default,{app:t,key:t.id+"applications-management-layout-normal  ",showModal:S,setApp:m,setCheckList:e.setCheckList,setModalState:n,checkList:e.checkList,isOrdering:y,reuseSagaModel:!0})}))))}},bj5R:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDIwIDIwIj4KICA8ZGVmcz4KICAgIDxzdHlsZT4KICAgICAgLmNscy0xIHsKICAgICAgICBmaWxsLXJ1bGU6IGV2ZW5vZGQ7CiAgICAgICAgb3BhY2l0eTogMC40NTsKICAgICAgfQogICAgPC9zdHlsZT4KICA8L2RlZnM+CiAgPHBhdGggaWQ9Imljb25fTWFuYWdlbWVudCIgY2xhc3M9ImNscy0xIiBkPSJNMzI4LDE2OWEyLjQyOCwyLjQyOCwwLDAsMS0uMzUxLjI1M2MtMC42OC0uMTE3LTEuMzI4LTAuNzE2LTIuMDMyLTAuNDY5LTAuNjIxLjQ2MS0uNCwxLjM3OC0wLjY1LDIuMDQtMC41OTMuMjY5LTEuNSwwLjI3Ny0xLjY3MSwxLjA2NS0wLjA1OC42NzYsMC41OTIsMS4wNjQsMC45NTksMS41MzItMC4xMTUuNzA3LS42NzQsMS4zNTYtMC41LDIuMDksMC41MTQsMC41NiwxLjM3LjQsMi4wMzYsMC42MzMsMC4xMDgsMC4yNDkuMTExLDAuNTcxLDAuMjA3LDAuODU2aC03YTEuMDEzLDEuMDEzLDAsMCwxLTEtMVYxNjZhMi4wNjksMi4wNjksMCwwLDEsLjg0Ni0xLjMxOWwyLjk0NC0yLjg0NGExLjk2MywxLjk2MywwLDAsMSwyLjcyOCwwbDIuOTQ0LDIuODQ0QTEuNywxLjcsMCwwLDEsMzI4LDE2NnYzWm0tNC44NDctMi41M2ExLjI1OCwxLjI1OCwwLDEsMC0xLjI1Ny0xLjI1OCwxLjI1NywxLjI1NywwLDAsMCwxLjI1NywxLjI1OGgwWm01Ljk0OSwyLjgwOWExLjg1OCwxLjg1OCwwLDAsMSwuNywxLjI4M2MwLjUyOCwwLjE5MSwxLjIyMywwLDEuNjE4LjQ5MywwLjI4NCwwLjUzNi0uMjc4LDEuMTEyLTAuMzgyLDEuNjcyYTIuMDgxLDIuMDgxLDAsMCwxLC44MDksMS4zODMsMC43MjcsMC43MjcsMCwwLDEtLjYuNTYxLDQuMTMxLDQuMTMxLDAsMCwwLS42MzQuMjM5LDQuNTc1LDQuNTc1LDAsMCwwLS40MjIsMS4zMzQsMC41NCwwLjU0LDAsMCwxLS43NTMuMjUxLDIuNTA2LDIuNTA2LDAsMCwwLTEuMTA2LS4zNTNjLTAuNDE2LjIzLS43LDAuNzg1LTEuMjMsMC43MjItMC42MzgtLjEwNy0wLjY0NC0wLjg1OC0wLjg1MS0xLjMzNi0wLjUzMi0uMTg2LTEuMjgyLTAuMDM4LTEuNjI5LTAuNTA3LTAuMjQ1LS41LjMwNy0xLjEwNywwLjQtMS42NzFhMS45MjIsMS45MjIsMCwwLDEtLjc2OC0xLjIyNmMwLjEzNS0uNjMuODYzLTAuNjM3LDEuMzM3LTAuODU0LDAuMi0uNTI4LjAyMi0xLjI2MSwwLjUyLTEuNjMsMC41NjItLjIsMS4wODIuMjgxLDEuNjI1LDAuMzc1LDAuNDEtLjMuNzgxLTAuOTMzLDEuMzcxLTAuNzM2aDBabS0xLjI4MywyLjM0OWExLjQ1NSwxLjQ1NSwwLDAsMC0uOTM5LDIuMjc4LDEuNDMxLDEuNDMxLDAsMCwwLDIuNDkzLS4zNTYsMS40NDgsMS40NDgsMCwwLDAtMS41NTQtMS45MjJoMFptMCwwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzE0LjkyMiAtMTU5LjE0MSkiLz4KPC9zdmc+Cg=="},kQEM:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDIwIDIwIj4KICA8ZGVmcz4KICAgIDxzdHlsZT4KICAgICAgLmNscy0xIHsKICAgICAgICBmaWxsLXJ1bGU6IGV2ZW5vZGQ7CiAgICAgICAgZmlsbDogIzY5NjlkNzsKICAgICAgfQogICAgPC9zdHlsZT4KICA8L2RlZnM+CiAgPHBhdGggaWQ9Imljb25fTWFuYWdlbWVudCIgY2xhc3M9ImNscy0xIiBkPSJNMzI4LDE2OWEyLjQyOCwyLjQyOCwwLDAsMS0uMzUxLjI1M2MtMC42OC0uMTE3LTEuMzI4LTAuNzE2LTIuMDMyLTAuNDY5LTAuNjIxLjQ2MS0uNCwxLjM3OC0wLjY1LDIuMDQtMC41OTMuMjY5LTEuNSwwLjI3Ny0xLjY3MSwxLjA2NS0wLjA1OC42NzYsMC41OTIsMS4wNjQsMC45NTksMS41MzItMC4xMTUuNzA3LS42NzQsMS4zNTYtMC41LDIuMDksMC41MTQsMC41NiwxLjM3LjQsMi4wMzYsMC42MzMsMC4xMDgsMC4yNDkuMTExLDAuNTcxLDAuMjA3LDAuODU2aC03YTEuMDEzLDEuMDEzLDAsMCwxLTEtMVYxNjZhMi4wNjksMi4wNjksMCwwLDEsLjg0Ni0xLjMxOWwyLjk0NC0yLjg0NGExLjk2MywxLjk2MywwLDAsMSwyLjcyOCwwbDIuOTQ0LDIuODQ0QTEuNywxLjcsMCwwLDEsMzI4LDE2NnYzWm0tNC44NDctMi41M2ExLjI1OCwxLjI1OCwwLDEsMC0xLjI1Ny0xLjI1OCwxLjI1NywxLjI1NywwLDAsMCwxLjI1NywxLjI1OGgwWm01Ljk0OSwyLjgwOWExLjg1OCwxLjg1OCwwLDAsMSwuNywxLjI4M2MwLjUyOCwwLjE5MSwxLjIyMywwLDEuNjE4LjQ5MywwLjI4NCwwLjUzNi0uMjc4LDEuMTEyLTAuMzgyLDEuNjcyYTIuMDgxLDIuMDgxLDAsMCwxLC44MDksMS4zODMsMC43MjcsMC43MjcsMCwwLDEtLjYuNTYxLDQuMTMxLDQuMTMxLDAsMCwwLS42MzQuMjM5LDQuNTc1LDQuNTc1LDAsMCwwLS40MjIsMS4zMzQsMC41NCwwLjU0LDAsMCwxLS43NTMuMjUxLDIuNTA2LDIuNTA2LDAsMCwwLTEuMTA2LS4zNTNjLTAuNDE2LjIzLS43LDAuNzg1LTEuMjMsMC43MjItMC42MzgtLjEwNy0wLjY0NC0wLjg1OC0wLjg1MS0xLjMzNi0wLjUzMi0uMTg2LTEuMjgyLTAuMDM4LTEuNjI5LTAuNTA3LTAuMjQ1LS41LjMwNy0xLjEwNywwLjQtMS42NzFhMS45MjIsMS45MjIsMCwwLDEtLjc2OC0xLjIyNmMwLjEzNS0uNjMuODYzLTAuNjM3LDEuMzM3LTAuODU0LDAuMi0uNTI4LjAyMi0xLjI2MSwwLjUyLTEuNjMsMC41NjItLjIsMS4wODIuMjgxLDEuNjI1LDAuMzc1LDAuNDEtLjMuNzgxLTAuOTMzLDEuMzcxLTAuNzM2aDBabS0xLjI4MywyLjM0OWExLjQ1NSwxLjQ1NSwwLDAsMC0uOTM5LDIuMjc4LDEuNDMxLDEuNDMxLDAsMCwwLDIuNDkzLS4zNTYsMS40NDgsMS40NDgsMCwwLDAtMS41NTQtMS45MjJoMFptMCwwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzE0LjkyMiAtMTU5LjE0MSkiLz4KPC9zdmc+Cg=="},"nO+Y":function(e,t,a){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(function(n){e.validateFields(t,a,function(e,t){n(!e&&t)})})}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(function(n){e.validateFieldsAndScroll(t,a,function(e,t){n(!e&&t)})})}Object.defineProperty(t,"__esModule",{value:!0}),t.validateFieldsByForm=n,t.validateFieldsAndScrollByForm=i},pJmw:function(e,t,a){"use strict";var n=a("tAuX"),i=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(a("p0pE")),l=i(a("gWZ8"));a("5Dmo");var u=i(a("3S7+")),d=i(a("qIgq"));a("5NDa");var o=i(a("5rEg"));a("ozfa");var s=i(a("MJZm")),c=n(a("q1tI")),p=a("Hg0r"),f=a("g96v"),g=a("r9/Z");a("xEJd");var h=i(a("LvDl")),v=a("qKvR"),x=s.default.TreeNode,M=o.default.Search,m=function e(t,a){for(var n,i=0;i<a.length;i++){var r=a[i];r.children&&(r.children.some(function(e){return e.name===t})?n=r.id:e(t,r.children)&&(n=e(t,r.children)))}return n};function A(e,t){var a=(0,p.useDispatch)(),n=e.rightContentView;(0,f.useRuntimeSagaModels)(e,[(0,g.appTagSagaSyncModelGen)(g.TAGS_SAGA_MODEL_NS),(0,g.appTagOrderSagaSyncModelGen)(g.TAG_APP_ORDER_SAGA_MODEL_NS)]);var i=(0,p.useSelector)(function(e){return e["application-management"].selectedTag}),o=(0,p.useSelector)(function(e){var t;return(null===e||void 0===e?void 0:null===(t=e[g.TAGS_SAGA_MODEL_NS])||void 0===t?void 0:t.applicationTags)||[]}),A=(0,p.useSelector)(function(e){var t;return(null===e||void 0===e?void 0:null===(t=e[g.TAG_ORDER_SAGA_MODEL_NS])||void 0===t?void 0:t.tagOrders)||[]}),L=h.default.keyBy(o,"id"),y=(0,g.makeTagTree)(o,A),j=(0,c.useState)(function(){return h.default.cloneDeep(y)}),w=(0,d.default)(j,2),T=w[0],C=w[1];function S(t){var a=e.tagSearchVal,n=t.name.indexOf(a),i=t.name.substr(0,n),r=t.name.substr(n+a.length),l=e.changeTagOrder?3:.1,d=n>-1?(0,v.jsx)(u.default,{title:r,mouseEnterDelay:l},(0,v.jsx)("span",null,i,(0,v.jsx)("span",{style:{color:"#f50"}},a),r)):(0,v.jsx)(u.default,{title:t.name,mouseEnterDelay:l},(0,v.jsx)("span",null,t.name));return(0,v.jsx)(x,{title:d,key:t.id,mouseEnterDelay:l},((null===t||void 0===t?void 0:t.children)||[]).map(S))}function I(e){var t,a=e.node.props.eventKey,n=e.dragNode.props.eventKey,i=e.node.props.pos.split("-"),r=e.dropPosition-Number(i[i.length-1]),u=function e(t,a,n){t.forEach(function(t,i,r){return t.id===a?n(t,i,r):t.children?e(t.children,a,n):void 0})},d=(0,l.default)(T);if(u(d,n,function(e,a,n){n.splice(a,1),t=e}),e.dropToGap)if((e.node.props.children||[]).length>0&&e.node.props.expanded&&1===r)u(d,a,function(e){e.children=e.children||[],e.children.unshift(t),t.parentId=e.id});else{var o,s;u(d,a,function(e,a,n){o=n,s=a,t.parentId=e.parentId}),-1===r?o.splice(s,0,t):o.splice(s+1,0,t)}else u(d,a,function(e){e.children=e.children||[],e.children.push(t),t.parentId=e.id});C(d)}return(0,c.useEffect)(function(){C(h.default.cloneDeep(y))},[JSON.stringify(y)]),(0,c.useImperativeHandle)(t,function(){return{getNextTagAndOrders:function(){var e=(0,f.getSagaState)(g.TAG_ORDER_SAGA_MODEL_NS),t=e.tagOrders,a=(0,f.getSagaState)(g.TAGS_SAGA_MODEL_NS),n=a.applicationTags;function i(e){return h.default.flatMap(e,function(e){return[e].concat((0,l.default)(i(e.children)))})}var u=i(T),d=h.default.keyBy(u,"id"),o=h.default.groupBy(u,"parentId"),s=h.default.map(t,function(e){var t=o[e.appTagId];return e.appTagId&&!d[e.appTagId]?null:(0,r.default)({},e,{order:h.default.map(t,function(e){return e.id})})}).filter(h.default.identity),c=h.default.map(n,function(e){var t;return(0,r.default)({},e,{parentId:null===(t=d[e.id])||void 0===t?void 0:t.parentId})});return{nextTags:c,nextTagOrders:s}},restoreTagOrders:function(){C(h.default.cloneDeep(y))}}}),(0,v.jsx)("div",{id:"app-tag-tree"},(0,v.jsx)("div",{className:"pd4 mg2b"},(0,v.jsx)(M,{className:"my-search",style:{minWidth:"200px",height:"32px",boxSizing:"border-box"},allowClear:!0,placeholder:"\u8f93\u5165\u6807\u7b7e\u540d\u79f0",onSearch:function(t){var a=o.map(function(e){return e.name.indexOf(t)>-1?(e.id,m(e.name,y)):null}).filter(function(e,t,a){return e&&a.indexOf(e)===t}),n=[];function i(e){var t,a,r;(null===(t=L[e])||void 0===t?void 0:t.parentId)&&(n.push(null===(a=L[e])||void 0===a?void 0:a.parentId),i(null===(r=L[e])||void 0===r?void 0:r.parentId))}a.map(function(e){n.push(e),i(e)}),n=h.default.union(n),e.setexpandedTag(n),e.setTagSearchVal(t)}})),(0,v.jsx)(s.default,{checkable:!n,draggable:e.changeTagOrder,onDragEnter:function(t){e.setexpandedTag(t.expandedKeys)},onDrop:I,expandedKeys:e.expandedTag,checkStrictly:!0,checkedKeys:e.checkedTag,selectedKeys:[i],onSelect:function(e){n&&e[0]&&("unTyped"===e[0]&&"changeAppOrder"!==n||a({type:"application-management/change",payload:{selectedTag:e[0]}}))},onCheck:function(t){return a({type:"application-management/change",payload:{checkList:[]}}),e.setCheckedTag(t)},onExpand:function(t,a){var n=a.node,i=n.props.eventKey,r=[];return e.expandedTag.includes(i)?(r=e.expandedTag.filter(function(e){return e!==i}),e.setexpandedTag(r)):e.setexpandedTag(h.default.concat(e.expandedTag,i))}},T.map(S)))}var L=(0,c.forwardRef)(A);t.default=L},qZsN:function(e,t,a){"use strict";var n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("d6i3"));a("miYZ");var r=n(a("tsqr"));a("P2fV");var l=n(a("NJEC")),u=n(a("p0pE"));a("5NDa");var d=n(a("5rEg"));a("y8nQ");var o=n(a("Vl3Y")),s=n(a("jehZ"));a("7Kak");var c=n(a("9yH6"));a("/zsF");var p=n(a("PArb"));a("+L6B");var f=n(a("2/Rp")),g=n(a("1l/V")),h=n(a("q1tI")),v=a("nO+Y"),x=a("Hg0r"),M=a("g96v"),m=a("r9/Z"),A=a("hdZo"),L=n(a("LvDl")),y=a("B+SW"),j=a("qKvR"),w="not-typed";function T(e){return C.apply(this,arguments)}function C(){return C=(0,g.default)(i.default.mark(function e(t){var a,n,l,u,d,o,s,c,p,f;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.dispatch,n=t.tagList,l=t.orderMap,u=t.form,d=t.isEditing,o=t.selectedItem,t.tagListMap,e.next=3,(0,v.validateFieldsByForm)(u);case 3:if(s=e.sent,s){e.next=6;break}return e.abrupt("return",r.default.error("\u8bf7\u586b\u5199\u5fc5\u586b\u9879"));case 6:if(c=n.find(function(e){return e.id!==o.id&&e.name===s.name}),(null===c||void 0===c?void 0:c.parentId)!==o.parentId){e.next=9;break}return e.abrupt("return",r.default.error("\u540c\u7ea7\u4e0b\u5b58\u5728\u540c\u540d\u6807\u7b7e"));case 9:if(d){e.next=20;break}return e.next=12,(0,A.createApptag)({newTag:s,orderMap:l});case 12:if(p=e.sent,null===p||void 0===p?void 0:p.success){e.next=15;break}return e.abrupt("return",r.default.error("\u521b\u5efa\u5931\u8d25"));case 15:return r.default.success("\u521b\u5efa\u6210\u529f"),a({type:"".concat(m.TAGS_SAGA_MODEL_NS,"/fetch")}),a({type:"".concat(m.TAG_APP_ORDER_SAGA_MODEL_NS,"/fetch")}),u.resetFields(),e.abrupt("return");case 20:if((null===s||void 0===s?void 0:s.name)!==(null===o||void 0===o?void 0:o.name)){e.next=22;break}return e.abrupt("return",r.default.error("\u6ca1\u6709\u4fee\u6539,\u65e0\u9700\u4fdd\u5b58"));case 22:if(null===s||void 0===s?void 0:s.name){e.next=24;break}return e.abrupt("return",r.default.error("\u8bf7\u586b\u5199\u6807\u7b7e\u540d\u79f0"));case 24:return e.next=26,(0,A.editTag)({id:null===o||void 0===o?void 0:o.id,name:null===s||void 0===s?void 0:s.name});case 26:if(f=e.sent,null===f||void 0===f?void 0:f.success){e.next=29;break}return e.abrupt("return",r.default.error("\u7f16\u8f91\u5931\u8d25"));case 29:r.default.success("\u7f16\u8f91\u6210\u529f"),a({type:"".concat(m.TAGS_SAGA_MODEL_NS,"/fetch")}),a({type:"".concat(m.TAG_APP_ORDER_SAGA_MODEL_NS,"/fetch")}),u.resetFields();case 33:case"end":return e.stop()}},e)})),C.apply(this,arguments)}function S(e){return I.apply(this,arguments)}function I(){return I=(0,g.default)(i.default.mark(function e(t){var a,n,l;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.tagId,n=t.dispatch,e.next=3,(0,A.deleteTag)(a);case 3:if(l=e.sent,null===l||void 0===l?void 0:l.success){e.next=6;break}return e.abrupt("return",r.default.error("\u5220\u9664\u6807\u7b7e\u5931\u8d25"));case 6:r.default.success("\u5220\u9664\u6807\u7b7e\u6210\u529f"),n({type:"application-management/change",payload:{selectedTag:""}}),n({type:"".concat(m.TAGS_SAGA_MODEL_NS,"/fetch")}),n({type:"".concat(m.TAG_APP_ORDER_SAGA_MODEL_NS,"/fetch")});case 10:case"end":return e.stop()}},e)})),I.apply(this,arguments)}function D(e){var t;(0,M.useRuntimeSagaModels)(e,[(0,m.appTagSagaSyncModelGen)(m.TAGS_SAGA_MODEL_NS),(0,m.appTagOrderSagaSyncModelGen)(m.TAG_APP_ORDER_SAGA_MODEL_NS)]);var a=(0,x.useSelector)(function(e){return e["application-management"].selectedTag}),n=(0,x.useSelector)(function(e){var t;return(null===e||void 0===e?void 0:null===(t=e[m.TAGS_SAGA_MODEL_NS])||void 0===t?void 0:t.applicationTags)||[]}),i=(0,x.useSelector)(function(e){var t;return(null===e||void 0===e?void 0:null===(t=e[m.TAG_ORDER_SAGA_MODEL_NS])||void 0===t?void 0:t.tagOrders)||[]}),r=L.default.keyBy(n,"id"),g=(0,y.dictBy)(i,function(e){return e.appTagId},function(e){return e.order}),v=(0,x.useDispatch)(),A={labelCol:{span:4},wrapperCol:{span:18}},C=e.form.getFieldDecorator,I=e.selectedKeys,D=e.isCreate,N=e.tagTypeTree,b=void 0===N?{}:N,E=e.setRightContentView,k=!D&&b.id===w&&L.default.includes(I,w),O=null===e||void 0===e?void 0:e.isEditing,_=(null===e||void 0===e?void 0:e.changeMode)||null,z=r[a]||{},G=null===z||void 0===z?void 0:z.name,R=O&&L.default.isEmpty(z);return(0,j.jsx)(h.default.Fragment,null,(0,j.jsx)("div",{className:"pd3"},O?(0,j.jsx)(f.default,{type:"primary",style:{color:"#6969D7"},onClick:function(){return _("main-tree-right-tag-type-create")}},(0,j.jsx)("span",{style:{color:"#ffffff"}},"\u6dfb\u52a0\u5e94\u7528\u6807\u7b7e")):null,(0,j.jsx)(p.default,{orientation:"left"},"\u5e94\u7528\u6807\u7b7e\u4fe1\u606f"),(0,j.jsx)(o.default,{layout:"horizontal"},O?null:(0,j.jsx)(o.default.Item,(0,s.default)({},A,{label:"\u7236\u6807\u7b7e"}),C("parentId",{initialValue:"unTyped"!==a?a:""})((0,j.jsx)(c.default.Group,null,(0,j.jsx)(c.default,{key:"noparent",value:""},"\u65e0"),a&&"unTyped"!==a?(0,j.jsx)(c.default,{key:"father-node",value:a},null===(t=r[a])||void 0===t?void 0:t.name):null))),(0,j.jsx)(o.default.Item,(0,s.default)({},A,{label:"\u6807\u7b7e\u540d\u79f0",hasFeedback:!0}),k?"\u672a\u5206\u7c7b":C("name",{rules:[{min:2,max:20,type:"string",required:!0,pattern:new RegExp(/^[\S]/,"g"),message:"\u8bf7\u8f93\u5165\u6807\u7b7e\u540d\u79f0\uff0c\u957f\u5ea6\u4e3a2\u81f320\u4e2a\u5b57\u7b26,\u4e14\u5f00\u5934\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:O?G:""})((0,j.jsx)(d.default,{type:"text",autoComplete:"off",holder:"\u6807\u7b7e\u5206\u7c7b\u540d\u79f0\uff0c\u4e0d\u8d85\u8fc720\u4e2a\u5b57\u7b26"}))))),(0,j.jsx)("div",{style:{marginLeft:"190px"}},(0,j.jsx)(f.default,{type:"primary",className:"mg1r iblock",onClick:function(){return T((0,u.default)({dispatch:v,tagList:n,orderMap:g,isEditing:O,selectedItem:z},e))},disabled:R},"\u4fdd\u5b58"),O?(0,j.jsx)(l.default,{okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",title:"\u786e\u5b9a\u5220\u9664\u8be5\u6807\u7b7e?",disabled:R,onConfirm:function(){return S({tagId:a,dispatch:v})}},(0,j.jsx)(f.default,{type:"danger",className:"mg1r iblock",disabled:R},"\u5220\u9664")):null,(0,j.jsx)(f.default,{type:"cancle",className:"mg1r iblock",onClick:function(){if(e.form.resetFields(),O)return E(),void v({type:"application-management/change",payload:{selectedTag:""}});E("main-tree-right-tag-type-edit")}},"\u53d6\u6d88")))}var N=o.default.create()(D);t.default=N},xEJd:function(e,t,a){}}]);